---
layout: default
---

<div class="max-w-4xl mx-auto text-lg">
  <input class="w-11/12 mx-4 p-2 border-solid border-2 rounded-md" type="search" placeholder="Search..." id="search" />
  <ul class="w-11/12 mx-6 py-2" id="results"></ul>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"></script>

<script>
  (function (window, document) {
    "use strict";

    const search = (e) => {
      const results = window.index.search(e.target.value, {
        bool: "OR",
        expand: true,
      });

      get("results").innerHTML = "";

      if (results && results.length) {
        results.map(link);
      }
      else{
        const no = make("span");
        no.textContent = "...nothing..."
        get("results").appendChild(no);
      }
    };

    const get = (id) => document.getElementById(id);
    const make = (e) => document.createElement(e);

    const link = ({doc: { id, title } }) => {
      const li = make("li");
      li.classList.add("my-4");
      const a = make("a");
      a.setAttribute("href", id);
      a.textContent = title;
      li.appendChild(a);
      get("results").appendChild(li);
    }


    fetch("/search.json").then((response) =>
      response.json().then((rawIndex) => {
        window.index = elasticlunr.Index.load(rawIndex);
        document.getElementById("search").addEventListener("input", search);
      })
    );
  })(window, document);
</script>

